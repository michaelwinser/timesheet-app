# Principle Audit Report

**Date:** Tue Jan 13 14:05:02 EST 2026
**Generated by:** scripts/audit-principles.sh

## Summary

| Check | Violations | Status |
|-------|------------|--------|
| State Synchronization | 2 | ⚠️ |
| Handler Layering (SQL) | 0 | ✅ |
| Migration Location | 0 | ✅ |
| Large Components (>500 lines) | 4 | ⚠️ |
| Commit Format | 11 | ⚠️ |
| **Total** | **17** | ⚠️ |

---

## Details

### State Synchronization Violations

```
/Users/michaelw/claude/projects/timesheet-app/web/src/routes/invoices/[id]/+page.svelte:10:	let invoice = $state<Invoice | null>(null);
/Users/michaelw/claude/projects/timesheet-app/web/src/routes/projects/[id]/+page.svelte:11:	let project = $state<Project | null>(null);
```

### Handler Layering Violations

_No violations found._

### Migration Location Violations

_No violations found._

### Large Components (>500 lines)

```
/Users/michaelw/claude/projects/timesheet-app/web/src/routes/settings/+page.svelte: 755 lines (threshold: 500)
/Users/michaelw/claude/projects/timesheet-app/web/src/routes/+page.svelte: 1899 lines (threshold: 500)
/Users/michaelw/claude/projects/timesheet-app/web/src/routes/projects/[id]/+page.svelte: 694 lines (threshold: 500)
/Users/michaelw/claude/projects/timesheet-app/web/src/routes/rules/+page.svelte: 823 lines (threshold: 500)
```

### Commit Format Violations (last 20 commits)

```
ff51895: 'Navigate back to projects list after saving project'
521968b: 'Auto-save time entry edits in popup'
281f28e: 'Persist project visibility checkbox state across navigation'
4b9bfdd: 'Freeze header row in spreadsheet exports (issue #33)'
c7b650c: 'Spreadsheet export enhancements (issue #33)'
19ab668: 'Changed classification confidence thresholds'
0a32211: 'Filter events by calendar.is_selected in queries (issue #93)'
64c1119: 'Lower high confidence threshold from 80% to 65% (issue #82)'
387fe95: 'Skip working location events during calendar sync (issue #92)'
6bf4b60: 'Render 0h time entries with muted outlined style in chart view'
a6c1e85: 'Create 0h placeholder entries for empty days when invoicing'
```

---

## Recommendations

- **State Sync:** Review flagged files and refactor to use ID + $derived pattern


- **Large Components:** Consider splitting components over 500 lines
- **Commit Format:** Use imperative verbs: Add, Fix, Implement, Refactor, Update, Remove, Redesign, Improve

